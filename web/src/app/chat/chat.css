.chat-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  /* On desktop, make it a card with margins. On mobile, it might stay full width. */
  max-width: 800px;
  margin: 0 auto;
  background-color: var(--md-sys-color-surface);
  color: var(--md-sys-color-on-surface);
  font-family: var(--md-sys-typescale-body-large-font);

  /* Visual Borders */
  border-left: 1px solid var(--md-sys-color-outline);
  border-right: 1px solid var(--md-sys-color-outline);
  box-shadow: var(--md-sys-elevation-level-2);
}

@media (min-width: 801px) {
  .chat-container {
    height: calc(100vh - 40px);
    margin-top: 20px;
    margin-bottom: 20px;
    border-radius: var(--md-sys-shape-corner-large);
    border: 1px solid var(--md-sys-color-outline);
  }
}

/* M3 Top App Bar - Center Aligned */
.header {
  background: var(--md-sys-color-surface);
  color: var(--md-sys-color-on-surface);
  padding: 1rem;
  text-align: center;
  /* Elevation logic or simple border */
  border-bottom: 1px solid var(--md-sys-color-surface-variant);
  display: flex;
  align-items: center;
  justify-content: center;
  height: 64px;
  /* Standard M3 height */
  box-sizing: border-box;
}

.header h1 {
  margin: 0;
  font-size: var(--md-sys-typescale-title-large-size);
  font-weight: var(--md-sys-typescale-title-large-weight);
  line-height: var(--md-sys-typescale-title-large-line-height);
}

.messages {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  background: var(--md-sys-color-background);
  display: flex;
  flex-direction: column;
  gap: 8px;
  /* M3 spacing */
}

.message {
  display: flex;
  max-width: 80%;
  margin-bottom: 8px;
}

.message.user {
  align-self: flex-end;
  justify-content: flex-end;
}

.message.agent {
  align-self: flex-start;
  justify-content: flex-start;
}

.bubble {
  padding: 12px 16px;
  font-size: var(--md-sys-typescale-body-large-size);
  line-height: var(--md-sys-typescale-body-large-line-height);
  font-weight: var(--md-sys-typescale-body-large-weight);
  word-wrap: break-word;
}

/* User Message: Primary Container (or Primary) */
.message.user .bubble {
  background: var(--md-sys-color-primary);
  color: var(--md-sys-color-on-primary);
  border-radius: var(--md-sys-shape-corner-extra-large);
  border-bottom-right-radius: var(--md-sys-shape-corner-extra-small);
}

/* Agent Message: Surface Container (or Secondary Container) */
.message.agent .bubble {
  background: var(--md-sys-color-secondary-container);
  color: var(--md-sys-color-on-secondary-container);
  border-radius: var(--md-sys-shape-corner-extra-large);
  border-bottom-left-radius: var(--md-sys-shape-corner-extra-small);
}

.input-area {
  display: flex;
  padding: 16px;
  background: var(--md-sys-color-surface);
  /* Elevation 2 for input area to separate it */
  box-shadow: 0px -1px 1px var(--md-sys-color-outline);
  border-top: none;
  align-items: center;
  gap: 8px;
}

input {
  flex: 1;
  padding: 12px 16px;
  border: 1px solid var(--md-sys-color-outline);
  border-radius: var(--md-sys-shape-corner-extra-large);
  /* Pill shape */
  font-size: var(--md-sys-typescale-body-large-size);
  background-color: var(--md-sys-color-surface);
  color: var(--md-sys-color-on-surface);
  caret-color: var(--md-sys-color-primary);
  outline: none;
  transition: border-color 0.2s;
}

input:focus {
  border-color: var(--md-sys-color-primary);
  border-width: 2px;
  padding: 11px 15px;
  /* Adjust for border width change to prevent layout shift */
}

button {
  background: var(--md-sys-color-primary);
  color: var(--md-sys-color-on-primary);
  border: none;
  padding: 0 24px;
  height: 48px;
  /* Touch target size */
  border-radius: var(--md-sys-shape-corner-extra-large);
  cursor: pointer;
  font-weight: var(--md-sys-typescale-label-large-weight);
  font-size: var(--md-sys-typescale-label-large-size);
  transition: box-shadow 0.2s, background-color 0.2s;
}

button:hover:not(:disabled) {
  /* Simple hover state darkening or elevation */
  box-shadow: var(--md-sys-elevation-level-1);
}

button:disabled {
  background: var(--md-sys-color-surface-variant);
  color: var(--md-sys-color-on-surface-variant);
  cursor: not-allowed;
  opacity: 0.38;
}

/* Clear Button - Secondary Action */
.clear-button {
  background-color: var(--md-sys-color-secondary-container);
  color: var(--md-sys-color-on-secondary-container);
  margin-left: 8px; /* Gap between Send and Clear */
}

.clear-button:hover:not(:disabled) {
  background-color: var(--md-sys-color-secondary-fixed-dim);
  box-shadow: var(--md-sys-elevation-level-1);
}

.typing {
  font-style: italic;
  opacity: 0.7;
}

/* Surface Styling */
.message.surface-container {
  max-width: 100%; /* Surfaces can be wider */
}

.surface-wrapper {
  background: var(--md-sys-color-surface-container-low); /* Slightly different bg for contrast */
  border-radius: var(--md-sys-shape-corner-extra-large);
  padding: 8px;
  border: 1px solid var(--md-sys-color-outline-variant);
  overflow: hidden; /* Contain children */
}
